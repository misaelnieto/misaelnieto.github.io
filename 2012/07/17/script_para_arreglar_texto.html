<!DOCTYPE html>




<html
 dir="ltr"
 lang="en"
 >
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content=#ffffff>
    <link rel="stylesheet" href="/assets/css/app.css">
    <link rel="shortcut icon" type="image/png"
           href="/favicon.ico" 
    />
    <script defer src="https://unpkg.com/alpinejs@3.9.0/dist/cdn.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">
    
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma-social@1/bin/bulma-social.min.css">
    
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Script para arreglar texto | Mosaico (Blog de Noe Nieto)</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Script para arreglar texto" />
<meta name="author" content="Noe Nieto" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Script para arreglar texto" />
<meta property="og:description" content="Script para arreglar texto" />
<link rel="canonical" href="http://blog.noenieto.com/2012/07/17/script_para_arreglar_texto.html" />
<meta property="og:url" content="http://blog.noenieto.com/2012/07/17/script_para_arreglar_texto.html" />
<meta property="og:site_name" content="Mosaico (Blog de Noe Nieto)" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2012-07-17T02:02:10+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Script para arreglar texto" />
<meta name="twitter:site" content="@misaelnieto_a" />
<meta name="twitter:creator" content="@Noe Nieto" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Noe Nieto"},"dateModified":"2012-07-17T02:02:10+00:00","datePublished":"2012-07-17T02:02:10+00:00","description":"Script para arreglar texto","headline":"Script para arreglar texto","mainEntityOfPage":{"@type":"WebPage","@id":"http://blog.noenieto.com/2012/07/17/script_para_arreglar_texto.html"},"url":"http://blog.noenieto.com/2012/07/17/script_para_arreglar_texto.html"}</script>
<!-- End Jekyll SEO tag -->

    
<script>if(!sessionStorage.getItem("_swa")&&document.referrer.indexOf(location.protocol+"//"+location.host)!== 0){fetch("https://counter.dev/track?"+new URLSearchParams({referrer:document.referrer,screen:screen.width+"x"+screen.height,user:"nnieto",utcoffset:"-7"}))};sessionStorage.setItem("_swa","1");</script>
<!-- head scripts --></head>

  <body>
    
<nav class="navbar is-primary" >
    <div class="container">
        <div class="navbar-brand">
            <a href="/" class="navbar-item">
                Mosaico (Blog de Noe Nieto)
            </a>
            <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navMenu">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>
        </div>
        <div class="navbar-menu" id="navMenu">
            <div class="navbar-start">
                
                
                    
                    <a href="/posts" class="navbar-item ">Posts archive</a>
                    
                
                    
                    <a href="/demos" class="navbar-item ">Demos, Tools & Toys</a>
                    
                
                    
                    <a href="https://www.noenieto.com/" class="navbar-item ">About me</a>
                    
                
                
            </div>

            <div class="navbar-end">
                
            </div>

        </div>
    </div>
</nav>

    
        <section class="hero  is-medium  is-bold is-primary" >
    <div class="hero-body ">
        <div class="container">
            <h1 class="title is-2">Script para arreglar texto</h1>
            <p class="subtitle is-3"></p>
            
        </div>
    </div>
</section>
    
    


    <section class="section">
        <div class="container">
            <div class="columns is-multiline">
                
                <div class="column is-12">
                    
                    
                    
                    
                    <div class="content">

    <p>Published: Jul 17, 2012 by Noe Nieto</p>

    

    <h1 id="script-para-arreglar-texto">Script para arreglar texto</h1>

<p>Actualizació 14-Enero-2017: HomeViva dejó de existir hace varios años.</p>

<p>Hoy me pidieron resolver un problema curioso; Tenemos un <del>[sitio]
(http://homeviva.com)</del> donde gente no técnica introduce información acerca de
sus proyectos.</p>

<p>El problema que había que resolver es que hay gente que escribe con puras
mayúsculas o puras minúsculas. Esto se ve horrendo, así que había que
encontrar una manera de reformatear esos textos para que tuvieran una mejor
presentación. Después de buscar un poco de información me encontré con la
posibilidad de resolver el problema usando únicamente la librería estándar
de Python.</p>

<p>La función que hace el reformateo es esta:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">re</span>
<span class="n">SENTENCE_REGEX</span> <span class="o">=</span> <span class="sa">r</span><span class="s">'[\?.:!;\n]'</span>
<span class="k">def</span> <span class="nf">format_string_sentence</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="n">sentences</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="p">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">re</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="n">SENTENCE_REGEX</span><span class="p">,</span> <span class="n">value</span><span class="p">)]</span>
    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">sentences</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">s</span><span class="p">.</span><span class="n">capitalize</span><span class="p">())</span>

    <span class="k">return</span> <span class="n">value</span>
</code></pre></div></div>

<p>Tuve que usar <code class="language-plaintext highlighter-rouge">re.split()</code> por que la función <code class="language-plaintext highlighter-rouge">string.split</code> sólo funciona
con un solo caracter de separación y si ponemos más de uno, pues lo toma como
una palabra y no como un a serie de caracteres que sirvan como separadores.
Pero <code class="language-plaintext highlighter-rouge">re.split()</code> toma un patrón de caracteres. Ejemplo de uso:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">re</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="s">"""
... lOreM IPsuM dolor sit amet, consectetur adipiscing ELIT. 
... Typi non habent claritatem insitam? EST USUS LEGENTIS in Iis Qui! facit eorum
... """</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">re</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s">'.!'</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
<span class="p">[</span><span class="s">'</span><span class="se">\n</span><span class="s">lOreM IPsuM dolor sit amet, consectetur adipiscing ELIT. </span><span class="se">\n</span><span class="s">Typi non habent claritatem insitam? EST USUS LEGENTIS in Iis Qu'</span><span class="p">,</span> <span class="s">' facit eorum</span><span class="se">\n</span><span class="s">'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre></div></div>

<p>Con eso ya se puede ver que separa cadenas usando como separador el caracter
<code class="language-plaintext highlighter-rouge">.</code> o el signo de admiración. Como ya se un poquito de expresiones regulares
me aventé hacer un regex super sencillo, uno que coincidiera con los
caracteres <code class="language-plaintext highlighter-rouge">?.:!;</code> y nueva línea.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">SENTENCE_REGEX</span> <span class="o">=</span> <span class="sa">r</span><span class="s">'[\?.:!;\n]'</span>
</code></pre></div></div>

<p>Y para terminar el truco uso <code class="language-plaintext highlighter-rouge">capitalize()</code> en en cada una de las cadenas
separadas y después las reemplazo en la cadena original.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="n">a</span>

<span class="n">lOreM</span> <span class="n">IPsuM</span> <span class="n">dolor</span> <span class="n">sit</span> <span class="n">amet</span><span class="p">,</span> <span class="n">consectetur</span> <span class="n">adipiscing</span> <span class="n">ELIT</span><span class="p">.</span> 
<span class="n">Typi</span> <span class="n">non</span> <span class="n">habent</span> <span class="n">claritatem</span> <span class="n">insitam</span><span class="err">?</span> <span class="n">EST</span> <span class="n">USUS</span> <span class="n">LEGENTIS</span> <span class="ow">in</span> <span class="n">Iis</span> <span class="n">Qui</span><span class="err">!</span> <span class="n">facit</span> <span class="n">eorum</span>

<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="n">format_string_sentence</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

<span class="n">Lorem</span> <span class="n">ipsum</span> <span class="n">dolor</span> <span class="n">sit</span> <span class="n">amet</span><span class="p">,</span> <span class="n">consectetur</span> <span class="n">adipiscing</span> <span class="n">elit</span><span class="p">.</span> 
<span class="n">Typi</span> <span class="n">non</span> <span class="n">habent</span> <span class="n">claritatem</span> <span class="n">insitam</span><span class="err">?</span> <span class="n">Est</span> <span class="n">usus</span> <span class="n">legentis</span> <span class="ow">in</span> <span class="n">iis</span> <span class="n">qui</span><span class="err">!</span> <span class="n">Facit</span> <span class="n">eorum</span>
</code></pre></div></div>

<p>Y ya. Fin.</p>

</div>

<div class="tags">
    
</div>


<p><strong>Share</strong></p>
<div class="buttons ">
    <a class="button is-medium is-facebook"
       onclick="window.open('https://www.facebook.com/share.php?u=http://blog.noenieto.com/2012/07/17/script_para_arreglar_texto.html');">
        <span class="icon"><i class="fab fa-facebook fa-lg"></i></span>
    </a>
    <a class="button is-medium is-twitter"
       onclick="window.open('https://twitter.com/intent/tweet?text=http://blog.noenieto.com/2012/07/17/script_para_arreglar_texto.html');">
        <span class="icon"><i class="fab fa-twitter fa-lg"></i></span>
    </a>
    <a class="button is-medium is-linkedin"
       onclick="window.open('https://www.linkedin.com/shareArticle?mini=true&url=http://blog.noenieto.com/2012/07/17/script_para_arreglar_texto.html&title=Script+para+arreglar+texto&summary=&source=');">
        <span class="icon"><i class="fab fa-linkedin fa-lg"></i></span>
    </a>
    <a class="button is-medium is-reddit"
       onclick="window.open('https://reddit.com/submit?url=http://blog.noenieto.com/2012/07/17/script_para_arreglar_texto.html');">
        <span class="icon"><i class="fab fa-reddit fa-lg"></i></span>
    </a>
</div>



  

  <div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = 'http://blog.noenieto.com/2012/07/17/script_para_arreglar_texto.html';
      this.page.identifier = 'http://blog.noenieto.com/2012/07/17/script_para_arreglar_texto.html';
    };
    (function() {
      var d = document, s = d.createElement('script');
      s.src = 'https://noenieto.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>



                </div>
                
            </div>
        </div>
    </section>
    
        <footer class="footer">
    <div class="container">
        
        
        <div class="columns is-multiline">
            
        </div>
        

        <div class="content is-small has-text-centered">
            <p class="">Theme built by <a href="https://www.csrhymes.com">C.S. Rhymes</a></p>
        </div>
    </div>
</footer>

    
    <script src="/assets/js/app.js" type="text/javascript"></script><!-- footer scripts --></body>
</html>
