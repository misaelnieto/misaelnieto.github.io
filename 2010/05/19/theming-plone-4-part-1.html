<!DOCTYPE html>




<html
 dir="ltr"
 lang="en"
 >
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content=#ffffff>
    <link rel="stylesheet" href="/assets/css/app.css">
    <link rel="shortcut icon" type="image/png"
           href="/favicon.ico" 
    />
    <script defer src="https://unpkg.com/alpinejs@3.9.0/dist/cdn.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">
    
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma-social@1/bin/bulma-social.min.css">
    
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Theming Plone 4 - Part 1 | Mosaico (Blog de Noe Nieto)</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Theming Plone 4 - Part 1" />
<meta name="author" content="Noe Nieto" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Lately I’ve been doing themes for Plone 4. I forget things, so these notes serve as documentation for some tricks I usally do for theming. There might be better ways to do some of them, so your comments are greatly appreciated. The audience is for anyone who has previous experience with buildout, Plone, Plone theming and related technologies like JavaScript, HTML, CSS and so on." />
<meta property="og:description" content="Lately I’ve been doing themes for Plone 4. I forget things, so these notes serve as documentation for some tricks I usally do for theming. There might be better ways to do some of them, so your comments are greatly appreciated. The audience is for anyone who has previous experience with buildout, Plone, Plone theming and related technologies like JavaScript, HTML, CSS and so on." />
<link rel="canonical" href="http://blog.noenieto.com/2010/05/19/theming-plone-4-part-1.html" />
<meta property="og:url" content="http://blog.noenieto.com/2010/05/19/theming-plone-4-part-1.html" />
<meta property="og:site_name" content="Mosaico (Blog de Noe Nieto)" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2010-05-19T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Theming Plone 4 - Part 1" />
<meta name="twitter:site" content="@misaelnieto_a" />
<meta name="twitter:creator" content="@Noe Nieto" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Noe Nieto"},"dateModified":"2010-05-19T00:00:00+00:00","datePublished":"2010-05-19T00:00:00+00:00","description":"Lately I’ve been doing themes for Plone 4. I forget things, so these notes serve as documentation for some tricks I usally do for theming. There might be better ways to do some of them, so your comments are greatly appreciated. The audience is for anyone who has previous experience with buildout, Plone, Plone theming and related technologies like JavaScript, HTML, CSS and so on.","headline":"Theming Plone 4 - Part 1","mainEntityOfPage":{"@type":"WebPage","@id":"http://blog.noenieto.com/2010/05/19/theming-plone-4-part-1.html"},"url":"http://blog.noenieto.com/2010/05/19/theming-plone-4-part-1.html"}</script>
<!-- End Jekyll SEO tag -->

    
<script>if(!sessionStorage.getItem("_swa")&&document.referrer.indexOf(location.protocol+"//"+location.host)!== 0){fetch("https://counter.dev/track?"+new URLSearchParams({referrer:document.referrer,screen:screen.width+"x"+screen.height,user:"nnieto",utcoffset:"-7"}))};sessionStorage.setItem("_swa","1");</script>
<!-- head scripts --></head>

  <body>
    
<nav class="navbar is-primary" >
    <div class="container">
        <div class="navbar-brand">
            <a href="/" class="navbar-item">
                Mosaico (Blog de Noe Nieto)
            </a>
            <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navMenu">
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>
        </div>
        <div class="navbar-menu" id="navMenu">
            <div class="navbar-start">
                
                
                    
                    <a href="/posts" class="navbar-item ">Posts archive</a>
                    
                
                    
                    <a href="/demos" class="navbar-item ">Demos, Tools & Toys</a>
                    
                
                    
                    <a href="https://www.noenieto.com/" class="navbar-item ">About me</a>
                    
                
                
            </div>

            <div class="navbar-end">
                
            </div>

        </div>
    </div>
</nav>

    
        <section class="hero  is-medium  is-bold is-primary" >
    <div class="hero-body ">
        <div class="container">
            <h1 class="title is-2">Theming Plone 4 - Part 1</h1>
            <p class="subtitle is-3"></p>
            
        </div>
    </div>
</section>
    
    


    <section class="section">
        <div class="container">
            <div class="columns is-multiline">
                
                <div class="column is-12">
                    
                    
                    
                    
                    <div class="content">

    <p>Published: May 19, 2010 by Noe Nieto</p>

    

    <p>Lately I’ve been doing themes for Plone 4. I forget things, so these notes
serve as documentation for some tricks I usally do for theming. There might be
better ways to do some of them, so your comments are greatly appreciated. The
audience is for anyone who has previous experience with buildout, Plone, Plone
theming and related technologies like JavaScript, HTML, CSS and so on.</p>

<p><strong>UPDATE</strong>: Part 2 is now available. This is the Part 1.</p>

<h2 id="setting-up-the-environment">Setting up the environment.</h2>

<p>I will use pastescript and buidlout on linux. On a clean install of Ubuntu
Lucid Lynx, I did:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>aptitude <span class="nb">install </span>build-essential python-dev python-pip python-pastescript python-setuptools
<span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>pip <span class="nb">install </span>zopeskel
</code></pre></div></div>

<h2 id="create-the-buildout">Create the buildout</h2>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>paster create <span class="nt">-t</span> plone3_buildout
<span class="go">Selected and implied templates:
</span><span class="gp">  ZopeSkel#</span>plone3_buildout  A buildout <span class="k">for </span>Plone 3 installation
<span class="go">
Enter project name: plone4b3
Variables:
  egg:      plone4b3
  package:  plone4b3
  project:  plone4b3

**************************************************************************
**   *** NOTE: You probably don't want to use this template!

**  Since Plone 3.1, the preferred way to get a buildout-based setup
**  for Plone is to use the standard installer for your operating
**  system (the Windows installer, the Mac installer, or the Unified
**  Installer for Linux/Unix/BSD). These give you a best-practice,
**  widely-used setup with an isolated Python and a well-documented
**  buildout. This template is here for older versions of Plone and
**  for experts who explicitly want a raw, non-installer-based
**  installation.

**  (This message is particularly aimed at people following out-of-
**  date books/documentation that suggest this is the right way to get
**  a Plone-based buildout. This is no longer the case.)
**************************************************************************

Expert Mode? (What question mode would you like? (easy/expert/all)?) ['easy']: easy
</span><span class="gp">Plone Version (Plone version #</span><span class="w"> </span>to <span class="nb">install</span><span class="o">)</span> <span class="o">[</span><span class="s1">'3.3.4'</span><span class="o">]</span>: 4.0b3
<span class="gp">Zope2 Install Path (Path to Zope2 installation;</span><span class="w"> </span>leave blank to fetch one!<span class="o">)</span> <span class="o">[</span><span class="s1">''</span><span class="o">]</span>:
<span class="gp">Plone Products Directory (Path to Plone products;</span><span class="w"> </span>leave blank to fetch <span class="o">[</span>Plone 3.0/3.1 only]<span class="o">)</span> <span class="o">[</span><span class="s1">''</span><span class="o">]</span>:
<span class="go">Initial Zope Username (Username for Zope root admin user) ['admin']:
Initial User Password (Password for Zope root admin user) ['']: secret
HTTP Port (Port that Zope will use for serving HTTP) ['8080']:
Debug Mode (Should debug mode be "on" or "off"?) ['off']:
Verbose Security? (Should verbose security be "on" or "off"?) ['off']:
Creating template plone3_buildout
Creating directory ./plone4b3
  Copying README.txt to ./plone4b3/README.txt
  Copying bootstrap.py to ./plone4b3/bootstrap.py
  Copying buildout.cfg_tmpl to ./plone4b3/buildout.cfg
  Recursing into products
    Creating ./plone4b3/products/
    Copying README.txt to ./plone4b3/products/README.txt
  Recursing into src
    Creating ./plone4b3/src/
    Copying README.txt to ./plone4b3/src/README.txt
  Recursing into var
    Creating ./plone4b3/var/
    Copying README.txt to ./plone4b3/var/README.txt

**************************************************************************
**   Generation finished.

**  You probably want to run python bootstrap.py and then edit
**  buildout.cfg before running bin/buildout -v".

**  See README.txt for details.
**************************************************************************

And finally, let's run bootstrap and buildout to download Plone3.

</span><span class="gp">tzicatl@tzicatl-lynx:~/plone4b3$</span><span class="w"> </span>python bootstrap.py
<span class="go">Creating directory '/home/tzicatl/plone4b3/bin'.
Creating directory '/home/tzicatl/plone4b3/parts'.
Creating directory '/home/tzicatl/plone4b3/eggs'.
Creating directory '/home/tzicatl/plone4b3/develop-eggs'.
Generated script '/home/tzicatl/plone4b3/bin/buildout'.
</span><span class="gp">tzicatl@tzicatl-lynx:~/plone4b3$</span><span class="w"> </span>bin/buildout
<span class="c">.....
</span><span class="gp">$</span><span class="w">
</span></code></pre></div></div>
<h2 id="create-theme-product-and-add-it-to-the-buildout">Create theme product and add it to the buildout</h2>

<p>Now, let’s create the theme. We are going to base our design on <a href="http://www.freecsstemplates.org/preview/hanging/">this
template</a> from
FreeCSSTemplates.org:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">cd </span>plone4b3/src
<span class="go">
</span><span class="gp">$</span><span class="w"> </span>paster create <span class="nt">-t</span> plone3_theme
<span class="go">Selected and implied templates:
</span><span class="gp">  ZopeSkel#</span>basic_namespace  A basic Python project with a namespace package
<span class="gp">  ZopeSkel#</span>plone            A project <span class="k">for </span>Plone products
<span class="gp">  ZopeSkel#</span>plone3_theme     A theme <span class="k">for </span>Plone 3
<span class="go">
Enter project name: plonetheme.hanging
Variables:
  egg:      plonetheme.hanging
  package:  plonethemehanging
  project:  plonetheme.hanging
Expert Mode? (What question mode would you like? (easy/expert/all)?) ['easy']: easy
Skin Name (Name of the theme (human facing, added to portal_skins)) ['']: FreeCSSTemplates.org Hanging
Empty Styles? (Override default public stylesheets with empty ones?) [False]:
Include Documentation? (Include in-line documentation in generated code?) [True]: False
Version (Version number for project) ['1.0']:
Description (One-line description of the project) ['An installable theme for Plone 3']: An Installable theme for Plone 4
Creating template basic_namespace
Creating directory ./plonetheme.hanging

</span><span class="c">....
</span></code></pre></div></div>

<p>Now it’s time to modify <code class="language-plaintext highlighter-rouge">buildout.cfg</code> in order to add the new created theme
product. So it’s also time to do some extra modifications, these include:</p>

<ul>
  <li>Remove all coments</li>
  <li>Move eggs and zml declarations from [instance] section to [buildout] section</li>
  <li>Add PIL and plonetheme.hanging to the eggs section</li>
  <li>Add ZCML slug for plonetheme.hanging</li>
</ul>

<h2 id="fine-tune-the-theme-package">Fine tune the theme package</h2>

<p>Before running buildout, we are going to “fine tune” the theme package.</p>

<p>Lets start with <code class="language-plaintext highlighter-rouge">src/plonetheme.hanging/setup.py</code></p>

<ul>
  <li>Add author and author e-mail</li>
  <li>Change url from <a href="http://svn.plone.org/svn/collective/">http://svn.plone.org/svn/collective/</a>  to <a href="http://github.com/tzicatl/plone4andtheme">http://github.com/tzicatl/plone4andtheme</a></li>
  <li>Change license from “GPL” to “Creative Commons Attribution 3.0 Unported” (I’m not a lawyer so i don’t know if i’m doing it right)</li>
  <li>Modify <code class="language-plaintext highlighter-rouge">README</code> to include credits and description.</li>
  <li>Rename <code class="language-plaintext highlighter-rouge">docs/LICENSE.GPL</code> to <code class="language-plaintext highlighter-rouge">LICENSE.CC</code> and paste the CC license contents.</li>
  <li>Edit <code class="language-plaintext highlighter-rouge">src/plonetheme.hanging/plonetheme/hanging/configure.zcml</code> and delete the line <code class="language-plaintext highlighter-rouge">&lt;i18n:registerTranslations directory="locales" /&gt;</code>. This is because we are not doing locales on this theme, but we can.</li>
  <li>I don’t like the long names that paster creates for the folders inside skins directory. So usually change them to something shorter. In order to do that:
    <ul>
      <li>Rename the directory, for example: rename from <code class="language-plaintext highlighter-rouge">plonetheme_hanging_custom_images</code> to <code class="language-plaintext highlighter-rouge">hangingtheme_images</code>.</li>
      <li>Change the corresponding name in <code class="language-plaintext highlighter-rouge">skins.zcml</code> and <code class="language-plaintext highlighter-rouge">profiles/default/skins.xml</code> (working from <code class="language-plaintext highlighter-rouge">src/plonetheme.hanging/plonetheme/hanging</code>).</li>
      <li>Note 1: Using your editor’s “Search &amp; Replace” is a good idea.</li>
      <li>Note 2: You can add another extra skin layers by adding directories and editing the two above files.</li>
    </ul>
  </li>
  <li>Change the base theme from “Plone Default” to “Sunburst Theme” by editing <code class="language-plaintext highlighter-rouge">profiles/default/skins.xml</code>.
    <ul>
      <li>Open the file and look for this line: “<code class="language-plaintext highlighter-rouge">&lt;skin-path name="FreeCSSTemplates.org Hanging" based-on="Plone Default"&gt;</code>”</li>
      <li>Change the based-on parameter from “Plone Default”  to “Sunburst Theme”</li>
      <li>This step is important in order to get all the new plone4 look &amp; feel and change it to suit our needs.</li>
    </ul>
  </li>
</ul>

<p>Now, we are ready to run the buildout process.</p>

<p>First, run <code class="language-plaintext highlighter-rouge">bootstrap.py</code> if you haven’t already done so</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python bootstrap.py
</code></pre></div></div>

<p>The buildout process will thake some minutes depending on the speed of your
computer and mainly your network bandwidth.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$bin/buildout
</code></pre></div></div>

<p>You might see some warnings but you should not see any error.</p>

<h2 id="start-plone-instance">Start plone instance</h2>

<p>If the buildout process was sucessful, now you will be able to start your
plone instance in foreground mode</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">tzicatl@tzicatl-lynx:~/plone4b3$</span><span class="w"> </span>bin/instance <span class="nb">fg</span>
<span class="go">2010-05-19 18:02:43 INFO ZServer HTTP server started at Wed May 19 18:02:43 2010
    Hostname: 0.0.0.0
    Port: 8080
2010-05-19 18:02:53 WARNING ZODB.FileStorage Ignoring index for /home/tzicatl/plone4b3/var/filestorage/Data.fs
2010-05-19 18:02:53 WARNING ZODB.blob (10127) Blob dir /home/tzicatl/plone4b3/var/blobstorage/ has insecure mode setting
2010-05-19 18:03:12 INFO Zope Ready to handle requests
</span></code></pre></div></div>

<p>Create a site and install the newly created theme. You should see a site equal
to plone4’s SunBurst Theme</p>

<p><img src="/media/plone4_theming1.png" alt="Our plone theme" /></p>

<h2 id="wrap-up">Wrap up</h2>

<p>On this installment we learned (or I hope so) to prepare our system for
buildout and Zope, we learned to create a Plone 4 instance from scratch and
also learned to create and prepare a plone product for the new theme we are
going to make.</p>

<p>That’s all for now. Wait for the Part 2.</p>


</div>

<div class="tags">
    
</div>


<p><strong>Share</strong></p>
<div class="buttons ">
    <a class="button is-medium is-facebook"
       onclick="window.open('https://www.facebook.com/share.php?u=http://blog.noenieto.com/2010/05/19/theming-plone-4-part-1.html');">
        <span class="icon"><i class="fab fa-facebook fa-lg"></i></span>
    </a>
    <a class="button is-medium is-twitter"
       onclick="window.open('https://twitter.com/intent/tweet?text=http://blog.noenieto.com/2010/05/19/theming-plone-4-part-1.html');">
        <span class="icon"><i class="fab fa-twitter fa-lg"></i></span>
    </a>
    <a class="button is-medium is-linkedin"
       onclick="window.open('https://www.linkedin.com/shareArticle?mini=true&url=http://blog.noenieto.com/2010/05/19/theming-plone-4-part-1.html&title=Theming+Plone+4+-+Part+1&summary=&source=');">
        <span class="icon"><i class="fab fa-linkedin fa-lg"></i></span>
    </a>
    <a class="button is-medium is-reddit"
       onclick="window.open('https://reddit.com/submit?url=http://blog.noenieto.com/2010/05/19/theming-plone-4-part-1.html');">
        <span class="icon"><i class="fab fa-reddit fa-lg"></i></span>
    </a>
</div>



  

  <div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = 'http://blog.noenieto.com/2010/05/19/theming-plone-4-part-1.html';
      this.page.identifier = 'http://blog.noenieto.com/2010/05/19/theming-plone-4-part-1.html';
    };
    (function() {
      var d = document, s = d.createElement('script');
      s.src = 'https://noenieto.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>



                </div>
                
            </div>
        </div>
    </section>
    
        <footer class="footer">
    <div class="container">
        
        
        <div class="columns is-multiline">
            
        </div>
        

        <div class="content is-small has-text-centered">
            <p class="">Theme built by <a href="https://www.csrhymes.com">C.S. Rhymes</a></p>
        </div>
    </div>
</footer>

    
    <script src="/assets/js/app.js" type="text/javascript"></script><!-- footer scripts --></body>
</html>
